<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Assembly - Molonoy Electronic Speed Control (MESC) Documentation</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../introduction/INTRODUCTION.html"><strong aria-hidden="true">1.</strong> Introduction to the MESC</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../introduction/FORWARD.html"><strong aria-hidden="true">1.1.</strong> Forward</a></li><li class="chapter-item expanded "><a href="../introduction/LICENSE.html"><strong aria-hidden="true">1.2.</strong> License</a></li><li class="chapter-item expanded "><a href="../introduction/FEATURES.html"><strong aria-hidden="true">1.3.</strong> Features</a></li></ol></li><li class="chapter-item expanded "><a href="../operation/INTRODUCTION.html"><strong aria-hidden="true">2.</strong> Theory and Operation</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../operation/THEORY.html"><strong aria-hidden="true">2.1.</strong> Theory of operation</a></li><li class="chapter-item expanded "><a href="../operation/CONTROL.html"><strong aria-hidden="true">2.2.</strong> Control loops</a></li><li class="chapter-item expanded "><a href="../operation/PORTING.html"><strong aria-hidden="true">2.3.</strong> Porting to other microprocessors</a></li></ol></li><li class="chapter-item expanded "><a href="../debugging/DEBUGGING.html"><strong aria-hidden="true">3.</strong> Debugging STM32CubeIDE</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../debugging/FIRMWARE_INTRO.html"><strong aria-hidden="true">3.1.</strong> Getting started</a></li></ol></li><li class="chapter-item expanded "><a href="../MP2/INTRO.html"><strong aria-hidden="true">4.</strong> Reference ESC: the MP2</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../MP2/PCB_ASSEMBLY_TESTING.html" class="active"><strong aria-hidden="true">4.1.</strong> Assembly</a></li><li class="chapter-item expanded "><a href="../MP2/HIGHER_AMP_ASSEMBLY.html"><strong aria-hidden="true">4.2.</strong> Increasing amperage</a></li></ol></li><li class="chapter-item expanded "><a href="../hardware.html"><strong aria-hidden="true">5.</strong> Hardware</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../hardware/QS165_MP2_WIRING.html"><strong aria-hidden="true">5.1.</strong> Additional wiring for an QS165 motor</a></li><li class="chapter-item expanded "><a href="../hardware/ENCLOSURE_GALLERY.html"><strong aria-hidden="true">5.2.</strong> A gallery of enclosures</a></li><li class="chapter-item expanded "><a href="../hardware/MOSFET_PARAMETERS.html"><strong aria-hidden="true">5.3.</strong> An introduction to MOSFET parameters</a></li><li class="chapter-item expanded "><a href="../hardware/MOTOR_PARAM.html"><strong aria-hidden="true">5.4.</strong> Measure motor resistance and inductance</a></li><li class="chapter-item expanded "><a href="../hardware/MP2_F405PILL_PINOUTS.html"><strong aria-hidden="true">5.5.</strong> Information about the F405 pill</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Molonoy Electronic Speed Control (MESC) Documentation</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="mp2-assembly-and-testing"><a class="header" href="#mp2-assembly-and-testing">MP2 Assembly and Testing</a></h1>
<h2 id="mp2-pcb-assembly"><a class="header" href="#mp2-pcb-assembly">MP2 PCB assembly</a></h2>
<p>The following is not a step by step guide for finishing the MP2 but it still may be useful for people putting together their first PCB. </p>
<p>Note: in this assembly we have not added any extra copper along the bus bars which is a common practice to increase the total amount of amperage used for these boards. Adding thicker bus bars is shown here <a href="../docs/HIGHER_AMP_ASSEMBLY.html">[LINK]</a>. However, <strong>we recommend that if you are going to solder bus bars on your MP2 that you begin with that step first</strong>. </p>
<p>There are MANY tutorials on how to solder and hopefully this is not your first rodeo. At a minimum you are going to need a high wattage soldering iron, decent quality solder, hopefully some flux remover and a multimeter to be able solder this board. </p>
<p>Looking at the top side of the board, it tends to be easiest to solder in the shorter parts first (so they rest flat on the bench when getting soldered in. So a possible order is:</p>
<ul>
<li>JST connectors</li>
<li>12V to 5V DC-DC converter</li>
<li>the larger 12V DC-DC converter</li>
<li>20 pin headers</li>
</ul>
<p>When doing the 20 pin headers...</p>
<img src="pics/PCB_ASSEMBLY01.png" title="header pin alignment">
<p>Another suggestion:</p>
<img src="pics/PCB_ASSEMBLY02.png" title="use flux remover">
<p>The 12V-5V DC converter sits funny:</p>
<img src="pics/PCB_ASSEMBLY03.png" title="DC-DC sits funny">
<p>Heat shrink tubing is your friend!</p>
<img src="pics/PCB_ASSEMBLY04.png" title="soldering Vbat and GND">
<p>Use precision:</p>
<img src="pics/PCB_ASSEMBLY05.png" title="watch out for components">
<img src="pics/PCB_ASSEMBLY06.png" title="watch out for solder bridges">
<p><strong>NOTE:</strong> These pics are included to talk about soldering issues, <strong>BUT BE ADVISED WE STRONGLY RECOMMEND</strong> users take advantage of the three holes on each phase to solder in larger wires and get improved current sharing with the MOSFETs. A better example is shown here [<a href="pics/HIGH_AMP_ASSEMBLY02.jpeg">LINK</a>] and take a look at [THIS FUTURE DOCUMENTATION] for other higher amperage connections. </p>
<img src="pics/PCB_ASSEMBLY07.png" title="it aint pretty">
<h2 id="mp2-continuity-testing"><a class="header" href="#mp2-continuity-testing">MP2 continuity testing</a></h2>
<p>Before you're finished with soldering be sure to do some important testing of your board. One set of tests involved using a continuity checker on your multimeter. This is a <strong>short video</strong> to help you get started:</p>
<p><a href="https://www.youtube.com/watch?v=L9bziAqBU64"><img src="https://img.youtube.com/vi/L9bziAqBU64/0.jpg" alt="MP2 continuity checking" /></a></p>
<p>Once your set up for testing run through the following tests:</p>
<img src="pics/PCB_ASSEMBLY08.png" title="pcb continuity chart">
<img src="pics/PCB_ASSEMBLY09.png" title="VBat continuity check">
<img src="pics/PCB_ASSEMBLY10.png" title="GND continuity check">
<img src="pics/PCB_ASSEMBLY11.png" title="Phase wire continuity check">
<h2 id="mp2-resistance-testing"><a class="header" href="#mp2-resistance-testing">MP2 resistance testing</a></h2>
<p>Since you have your multimeter out there are some other useful measurements to take. These tests can vary based on what type of meter you have. Also sometimes the readings will take a while to settle down to the final value.</p>
<img src="pics/PCB_ASSEMBLY12.png" title="Phase wire resistance check1">
<img src="pics/PCB_ASSEMBLY13.png" title="Phase wire resistance check2">
<img src="pics/PCB_ASSEMBLY14.png" title="Ground to testpoint check">
<img src="pics/PCB_ASSEMBLY15.png" title="Ground to VBat check">
<h2 id="mp2-powering-up"><a class="header" href="#mp2-powering-up">MP2 powering up</a></h2>
<p>Hopefully you have experience powering up a PCB for the first time, but here a subset of things you can do when starting up the MP2. </p>
<p>Connect a switch or put in a jumper over on the <a href="pics/PCB_ASSEMBLY16.png">middle-left side of the board</a>. Then: </p>
<ul>
<li>First remove the pill from the MP</li>
<li>Connect your multimeter to GND</li>
<li>Apply power to VBat</li>
<li>Note that in some cases the DC-DC converter wont activate at &lt;42 volts</li>
<li>Test for voltages on the points shown...</li>
</ul>
<img src="pics/PCB_ASSEMBLY17.png" title="Voltage check">
<p>If youre voltages look good, power off, plug in the pill and hopefully you'll see a comforting power light on the pill.</p>
<h2 id="mp2-loading-the-firmware"><a class="header" href="#mp2-loading-the-firmware">MP2 loading the firmware.</a></h2>
<ul>
<li>Disconnect the F405 pill from the MP2 board;</li>
<li>Search the internet and break a record ($2USD) for the most inexpensive <a href="https://www.google.com/search?q=st-link+v2">&quot;st-link v2&quot;</a> in existence;</li>
<li>Search on <a href="https://www.google.com/search?q=STM32CubeProgrammer+software+STM32&amp;oq=STM32CubeProgrammer+software+STM32">&quot;STM32CubeProgrammer software STM32&quot;</a>, download and install the programmer code;</li>
<li>Search, find, 'request from a friend' or compile for yourself a copy of the VESC bin file for the F405 pill;</li>
<li>Search <a href="https://www.google.com/search?q=st-link2+STM32+programming+bluepill">&quot;st-link V2 STM32 programming bluepill&quot;</a> to learn how to <a href="pics/IDE_7_stlink.png">connect</a> your st-link to a pill;</li>
<li>Use the STM32CubeProgrammer to upload the bin file;</li>
<li>Search, find, 'request from a friend' or compile for yourself a copy of the VESCtool;</li>
<li>Do not plug the pill into the MP2, upload the VESC firmware to the pill, connect the USB and start VESCtool;</li>
</ul>
<p>Select &quot;Connection&quot; on the left hand side of VESCtool. If you see this on your screen:
<img src="pics/PCB_ASSEMBLY18.png" title="VESC tool"></p>
<p>That is good news.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../MP2/INTRO.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="../MP2/HIGHER_AMP_ASSEMBLY.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../MP2/INTRO.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../MP2/HIGHER_AMP_ASSEMBLY.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <!-- Livereload script (if served using the cli tool) -->
        <script>
            const wsProtocol = location.protocol === 'https:' ? 'wss:' : 'ws:';
            const wsAddress = wsProtocol + "//" + location.host + "/" + "__livereload";
            const socket = new WebSocket(wsAddress);
            socket.onmessage = function (event) {
                if (event.data === "reload") {
                    socket.close();
                    location.reload();
                }
            };

            window.onbeforeunload = function() {
                socket.close();
            }
        </script>



        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </body>
</html>
